{"version":3,"sources":["../src/options.tsx"],"names":["humanizeDistanceStringImperial","React","Bus","Briefcase","Home","MapMarker","MapPin","S","addInParentheses","ICON_SIZE","GeocodedOptionIcon","feature","properties","source","MenuItem","active","children","disabled","id","onClick","undefined","Option","classes","color","icon","isActive","subTitle","title","TransitStopOption","stop","stopOptionIcon","dist","name","code","routes","map","route","shortName","longName","UserLocationIcon","userLocation","getLocationName","location","intl","type","formatMessage","defaultMessage","description","getStoredPlaceName","withDetails","detailText","getRenderData","setLocation","Icon","displayName","locationSelected"],"mappings":"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","sourcesContent":["import { humanizeDistanceStringImperial } from \"@opentripplanner/humanize-distance\";\nimport { Stop, UserLocation } from \"@opentripplanner/types\";\nimport React from \"react\";\nimport { IntlShape } from \"react-intl\";\nimport { Bus } from \"@styled-icons/fa-solid/Bus\";\nimport { Briefcase } from \"@styled-icons/fa-solid/Briefcase\";\nimport { Home } from \"@styled-icons/fa-solid/Home\";\nimport { MapMarker } from \"@styled-icons/fa-solid/MapMarker\";\nimport { MapPin } from \"@styled-icons/fa-solid/MapPin\";\n\nimport * as S from \"./styled\";\nimport {\n  UserLocationIconType,\n  UserLocationSelectedHandler,\n  UserLocationRenderData,\n  UserLocationIconProps\n} from \"./types\";\nimport { addInParentheses } from \"./utils\";\n\nexport const ICON_SIZE = 13;\n\nexport function GeocodedOptionIcon({\n  feature = {}\n}: {\n  feature: {\n    properties?: { source: string };\n  };\n}): React.ReactElement {\n  const { properties } = feature;\n  if (feature && properties) {\n    const { source } = properties;\n    if (source === \"transit\") {\n      return <Bus size={ICON_SIZE} />;\n    }\n  }\n  return <MapPin size={ICON_SIZE} />;\n}\n\nexport const MenuItem = ({\n  active = false,\n  children,\n  disabled = false,\n  id,\n  onClick = null\n}: {\n  active?: boolean;\n  children: React.ReactNode;\n  disabled?: boolean;\n  id?: string;\n  onClick?: () => void;\n}): React.ReactElement => (\n  <S.MenuItemLi\n    // Hide disabled choices from screen readers (a relevant status is already provided).\n    aria-hidden={disabled || undefined}\n    /* A known issue prevents combobox results to be read out on Voiceover. This is a hack to ensure \n    AT hear all options - see https://react-spectrum.adobe.com/blog/building-a-combobox.html#voiceover */\n    aria-live={active ? \"assertive\" : \"off\"}\n    active={active}\n    id={id}\n    onClick={disabled ? null : onClick}\n    role=\"option\"\n    aria-selected={active}\n    tabIndex={-1}\n  >\n    {children}\n  </S.MenuItemLi>\n);\n\nexport function Option({\n  classes = \"\",\n  color = null,\n  disabled = false,\n  icon = null,\n  id,\n  isActive = false,\n  onClick,\n  subTitle = null,\n  title = null\n}: {\n  classes?: string;\n  color?: string;\n  disabled?: boolean;\n  icon?: React.ReactNode;\n  id?: string;\n  isActive?: boolean;\n  onClick?: () => void;\n  subTitle?: React.ReactNode;\n  title?: React.ReactNode;\n}): React.ReactElement {\n  return (\n    <MenuItem active={isActive} disabled={disabled} id={id} onClick={onClick}>\n      <S.OptionContainer className={classes}>\n        <S.OptionIconContainer style={{ color }}>{icon}</S.OptionIconContainer>\n        <S.OptionContent>\n          {title}\n          {subTitle && (\n            <S.OptionSubTitle>\n              <S.HiddenContent>, </S.HiddenContent>\n              {subTitle}\n            </S.OptionSubTitle>\n          )}\n        </S.OptionContent>\n      </S.OptionContainer>\n    </MenuItem>\n  );\n}\n\nexport function TransitStopOption({\n  id,\n  isActive = false,\n  onClick,\n  stop,\n  stopOptionIcon\n}: {\n  id?: string;\n  isActive?: boolean;\n  onClick: () => void;\n  stop: Stop;\n  stopOptionIcon: React.ReactNode;\n}): React.ReactElement {\n  return (\n    <MenuItem active={isActive} id={id} onClick={onClick}>\n      <S.StopIconAndDistanceContainer>\n        {stopOptionIcon}\n        <S.StopDistance>\n          {humanizeDistanceStringImperial(stop.dist, true)}\n        </S.StopDistance>\n      </S.StopIconAndDistanceContainer>\n      <S.StopContentContainer>\n        <S.StopName>\n          {stop.name} ({stop.code})\n        </S.StopName>\n        <S.StopRoutes>\n          {(stop.routes || []).map(route => {\n            const name = route.shortName || route.longName;\n            return <S.RouteName key={`route-${name}`}>{name}</S.RouteName>;\n          })}\n        </S.StopRoutes>\n      </S.StopContentContainer>\n      <S.ClearBoth />\n    </MenuItem>\n  );\n}\n\nexport function UserLocationIcon({\n  userLocation\n}: UserLocationIconProps): React.ReactElement {\n  if (userLocation.icon === \"work\") return <Briefcase size={ICON_SIZE} />;\n  if (userLocation.icon === \"home\") return <Home size={ICON_SIZE} />;\n  return <MapMarker size={ICON_SIZE} />;\n}\n\nfunction getLocationName(location: UserLocation, intl: IntlShape): string {\n  switch (location.type) {\n    case \"home\":\n      return intl.formatMessage({\n        defaultMessage: \"Home\",\n        description: \"The home location\",\n        id: \"otpUi.LocationField.homeLocation\"\n      });\n    case \"work\":\n      return intl.formatMessage({\n        defaultMessage: \"Work\",\n        description: \"The work location\",\n        id: \"otpUi.LocationField.workLocation\"\n      });\n    default:\n      return location.name;\n  }\n}\n\nexport function getStoredPlaceName(\n  location: UserLocation,\n  intl: IntlShape,\n  withDetails = true\n): string {\n  let detailText;\n  if (withDetails) {\n    if (location.type === \"home\" || location.type === \"work\") {\n      detailText = location.name;\n    } else if (location.type === \"stop\") {\n      detailText = location.id;\n    }\n    // The case below for recent searches is not currently being used.\n    // } else if (location.type === \"recent\" && location.timestamp) {\n    //   detailText = moment(location.timestamp).fromNow();\n  }\n\n  return addInParentheses(intl, getLocationName(location, intl), detailText);\n}\n\n/**\n * Helper to populate the display name for a user-saved location.\n */\nexport function getRenderData(\n  location: UserLocation,\n  setLocation: UserLocationSelectedHandler,\n  Icon: UserLocationIconType,\n  intl: IntlShape\n): UserLocationRenderData {\n  return {\n    displayName: getStoredPlaceName(location, intl),\n    icon: <Icon userLocation={location} />,\n    // Create the event handler for when the location is selected\n    locationSelected: () => setLocation(location, \"SAVED\")\n  };\n}\n"],"file":"options.js"}