{"version":3,"sources":["../../src/ItineraryBody/place-row.tsx"],"names":["coreUtils","React","FormattedMessage","useIntl","DefaultTimeColumnContent","AccessLegBody","S","TransitLegBody","AccessibilityRating","defaultMessages","PlaceRow","accessibilityScoreGradationMap","AlertBodyIcon","AlertToggleIcon","alwaysCollapseAlerts","config","defaultFareSelector","diagramVisible","followsTransit","frameLeg","isDestination","lastLeg","leg","LegIcon","legIndex","LineColumnContent","mapillaryCallback","mapillaryKey","PlaceName","RouteDescription","RouteDescriptionFooter","setActiveLeg","setLegDiagram","setViewedTrip","showAgencyInfo","showElevationProfile","showLegIcon","showMapButtonColumn","showViewTripButton","TimeColumnContent","toRouteAbbreviation","TransitLegSubheader","TransitLegSummary","interline","interlineWithPreviousLeg","place","to","from","vertexType","mode","intl","viewOnMapMessage","formatMessage","defaultMessage","description","id","formattedPlace","direction","accessibilityScore","location","transitLeg","homeTimezone","route","getTransitOperatorFromLeg","transitOperators"],"mappings":"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","sourcesContent":["import coreUtils from \"@opentripplanner/core-utils\";\nimport React, { ReactElement } from \"react\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\n\nimport DefaultTimeColumnContent from \"../defaults/time-column-content\";\nimport AccessLegBody from \"../AccessLegBody\";\nimport * as S from \"../styled\";\nimport TransitLegBody from \"../TransitLegBody\";\n\nimport AccessibilityRating from \"./accessibility-rating\";\nimport { PlaceRowProps } from \"../types\";\nimport { defaultMessages } from \"../util\";\n\n/*\n  TODO: Wondering if it's possible for us to destructure the time\n  preferences from the config object and avoid making the props list so long\n*/\nexport default function PlaceRow({\n  accessibilityScoreGradationMap,\n  AlertBodyIcon,\n  AlertToggleIcon,\n  alwaysCollapseAlerts,\n  config,\n  defaultFareSelector,\n  diagramVisible,\n  followsTransit,\n  frameLeg,\n  isDestination,\n  lastLeg,\n  leg,\n  LegIcon,\n  legIndex,\n  LineColumnContent,\n  mapillaryCallback,\n  mapillaryKey,\n  PlaceName,\n  RouteDescription,\n  RouteDescriptionFooter,\n  setActiveLeg,\n  setLegDiagram,\n  setViewedTrip,\n  showAgencyInfo,\n  showElevationProfile,\n  showLegIcon,\n  showMapButtonColumn,\n  showViewTripButton,\n  TimeColumnContent = DefaultTimeColumnContent,\n  toRouteAbbreviation,\n  TransitLegSubheader,\n  TransitLegSummary\n}: PlaceRowProps): ReactElement {\n  // NOTE: Previously there was a check for itineraries that changed vehicles\n  // at a single stop, which would render the stop place the same as the\n  // interline stop. However, this prevents the user from being able to click\n  // on the stop viewer in this case, which they may want to do in order to\n  // check the real-time arrival information for the next leg of their journey.\n  const interline = !!(!isDestination && leg.interlineWithPreviousLeg);\n  // const hideBorder = interline || !legIndex;\n  const place = isDestination ? { ...leg.to } : { ...leg.from };\n  // OTP2 marks both bikes and scooters as BIKESHARE in the vertextype\n  // To get the right label, we need to fix scooters to be \"VEHICLERENTAL\"\n  place.vertexType =\n    leg.mode === \"SCOOTER\" && !isDestination\n      ? \"VEHICLERENTAL\"\n      : place.vertexType;\n\n  const intl = useIntl();\n  const viewOnMapMessage = intl.formatMessage({\n    defaultMessage: defaultMessages[\"otpUi.ItineraryBody.viewOnMap\"],\n    description: \"Text describing the view-on-map button\",\n    id: \"otpUi.ItineraryBody.viewOnMap\"\n  });\n\n  const formattedPlace = direction => (\n    <PlaceName config={config} interline={interline} place={direction} />\n  );\n\n  return (\n    <S.PlaceRowWrapper key={legIndex || \"destination-place\"}>\n      <S.LineColumn>\n        <LineColumnContent\n          interline={interline}\n          isDestination={isDestination}\n          lastLeg={lastLeg}\n          leg={leg}\n          LegIcon={LegIcon}\n          legIndex={legIndex}\n          toRouteAbbreviation={toRouteAbbreviation}\n        />\n      </S.LineColumn>\n      {/* Dot separating interlined segments, if applicable */}\n      <S.PlaceHeader>\n        {/*\n              TODO: Need to rework this -- Need to display a marker\n              for an interline place\n            */}\n        {interline && <S.InterlineDot>&bull;</S.InterlineDot>}\n        <S.PlaceName aria-hidden>\n          <PlaceName config={config} interline={interline} place={place} />\n        </S.PlaceName>\n      </S.PlaceHeader>\n      <S.TimeColumn>\n        {/* Custom rendering of the departure/arrival time of the specified leg. */}\n        <TimeColumnContent isDestination={isDestination} leg={leg} />\n        {!isDestination && leg.accessibilityScore && (\n          // TODO: Reorder markup so accessibility info doesn't fall between time and destination.\n          <AccessibilityRating\n            gradationMap={accessibilityScoreGradationMap}\n            isLeg\n            score={leg.accessibilityScore}\n          />\n        )}\n      </S.TimeColumn>\n      <S.InvisibleAdditionalDetails>\n        {!isDestination ? (\n          <FormattedMessage\n            description=\"Add starting location for access legs\"\n            id=\"otpUi.TransitLegBody.fromLocation\"\n            values={{\n              location: formattedPlace(leg.from)\n            }}\n          />\n        ) : (\n          <FormattedMessage\n            id=\"otpUi.TransitLegBody.arriveAt\"\n            defaultMessage={defaultMessages[\"otpUi.TransitLegBody.arriveAt\"]}\n            description=\"Identifies end of the trip to screenreaders\"\n            values={{ place: formattedPlace(leg.to) }}\n          />\n        )}\n      </S.InvisibleAdditionalDetails>\n      <S.PlaceDetails>\n        {/* Show the leg, if not rendering the destination */}\n        {!isDestination &&\n          (leg.transitLeg ? (\n            /* This is a transit leg */\n            <TransitLegBody\n              AlertBodyIcon={AlertBodyIcon}\n              AlertToggleIcon={AlertToggleIcon}\n              alwaysCollapseAlerts={alwaysCollapseAlerts}\n              defaultFareSelector={defaultFareSelector}\n              leg={leg}\n              legDestination={formattedPlace(leg.to)}\n              LegIcon={LegIcon}\n              legIndex={legIndex}\n              RouteDescription={RouteDescription}\n              RouteDescriptionFooter={RouteDescriptionFooter}\n              setActiveLeg={setActiveLeg}\n              setViewedTrip={setViewedTrip}\n              showAgencyInfo={showAgencyInfo}\n              showViewTripButton={showViewTripButton}\n              timeZone={config.homeTimezone}\n              TransitLegSubheader={TransitLegSubheader}\n              TransitLegSummary={TransitLegSummary}\n              transitOperator={coreUtils.route.getTransitOperatorFromLeg(\n                leg,\n                config.transitOperators\n              )}\n            />\n          ) : (\n            /* This is an access (e.g. walk/bike/etc.) leg */\n            <AccessLegBody\n              config={config}\n              diagramVisible={diagramVisible}\n              followsTransit={followsTransit}\n              leg={leg}\n              LegIcon={LegIcon}\n              legIndex={legIndex}\n              mapillaryCallback={mapillaryCallback}\n              mapillaryKey={mapillaryKey}\n              setActiveLeg={setActiveLeg}\n              setLegDiagram={setLegDiagram}\n              showElevationProfile={showElevationProfile}\n              showLegIcon={showLegIcon}\n              TransitLegSubheader={TransitLegSubheader}\n            />\n          ))}\n      </S.PlaceDetails>\n      {/* This prop is a string for some reason... */}\n      {showMapButtonColumn && (\n        <S.MapButtonColumn hideBorder=\"true\">\n          <S.MapButton\n            aria-label={viewOnMapMessage}\n            onClick={() => frameLeg({ isDestination, leg, legIndex, place })}\n            title={viewOnMapMessage}\n          >\n            <S.MapIcon title={viewOnMapMessage} />\n          </S.MapButton>\n        </S.MapButtonColumn>\n      )}\n    </S.PlaceRowWrapper>\n  );\n}\n"],"file":"place-row.js"}