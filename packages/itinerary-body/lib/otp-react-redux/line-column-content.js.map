{"version":3,"sources":["../../src/otp-react-redux/line-column-content.tsx"],"names":["cssWalk","css","cssBicycle","cssCar","cssMicromobility","cssTransit","getLegCSS","mode","IconStacker","styled","span","legLineBackgroundColor","leg","routeColor","transitLeg","coreUtils","itinerary","isTransit","undefined","barberPole","gap","LegLine","div","props","isFlex","StackedCircle","Circle","StackedCircleInner","StyledLocationIcon","LocationIcon","LineColumnContent","interline","isDestination","lastLeg","legIndex","legBadge","from","bikeShareId","rentalVehicle","startsWith","vertexType"],"mappings":"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","sourcesContent":["import coreUtils from \"@opentripplanner/core-utils\";\nimport LocationIcon from \"@opentripplanner/location-icon\";\nimport { Leg } from \"@opentripplanner/types\";\nimport React, { ReactElement } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { Circle } from \"@styled-icons/fa-solid/Circle\";\n\nimport { LineColumnContentProps } from \"../types\";\n\ninterface LegLineProps {\n  leg: Leg;\n  routeColor: string;\n}\n\nconst cssWalk = css`\n  background: radial-gradient(ellipse at center, #87cefa 40%, transparent 10%);\n  background-position: center -5px;\n  background-repeat: repeat-y;\n  background-size: 12px 12px;\n  left: 6px;\n  right: 6px;\n`;\n\nconst cssBicycle = css`\n  background: repeating-linear-gradient(\n    0deg,\n    red,\n    red 8px,\n    white 8px,\n    white 12.5px\n  );\n  left: 7.5px;\n  right: 7.5px;\n`;\n\nconst cssCar = css`\n  background: repeating-linear-gradient(\n    0deg,\n    grey,\n    grey 8px,\n    white 8px,\n    white 12.5px\n  );\n  left: 7.5px;\n  right: 7.5px;\n`;\n\nconst cssMicromobility = css`\n  background: repeating-linear-gradient(\n    0deg,\n    #f5a729,\n    #f5a729 8px,\n    white 8px,\n    white 12.5px\n  );\n  left: 7.5px;\n  right: 7.5px;\n`;\n\nconst cssTransit = css`\n  background-color: gray;\n  left: 5px;\n  right: 5px;\n`;\n\nfunction getLegCSS(mode) {\n  switch (mode) {\n    case \"WALK\":\n      return cssWalk;\n    case \"BICYCLE\":\n    case \"BICYCLE_RENT\":\n      return cssBicycle;\n    case \"CAR\":\n      return cssCar;\n    case \"MICROMOBILITY\":\n    case \"MICROMOBILITY_RENT\":\n    case \"SCOOTER\":\n      return cssMicromobility;\n    default:\n      return cssTransit;\n  }\n}\n\nconst IconStacker = styled.span`\n  position: absolute;\n  width: 100%;\n  top: 3px;\n  z-index: 20;\n`;\n\nconst legLineBackgroundColor = ({ leg, routeColor }: LegLineProps): string => {\n  const { mode } = leg;\n  return leg.transitLeg || coreUtils.itinerary.isTransit(mode)\n    ? routeColor\n      ? `#${routeColor}`\n      : \"#000088\"\n    : undefined;\n};\n\n/**\n * Generates background-image CSS for \"barber pole\" effect\n * @param routeColor  the background color. Assumed to be hex.\n */\nexport const barberPole = (\n  routeColor: string,\n  gap = 5\n): string => `repeating-linear-gradient( \n  -45deg, \n  ${routeColor}30, \n  ${routeColor}30 ${gap}px, \n  ${routeColor} ${gap}px, \n  ${routeColor} ${gap * 2}px\n  );`;\n\nconst LegLine = styled.div<LegLineProps>`\n  ${props => getLegCSS(props.leg.mode)}\n\n  /* Disabling CSS order rules is the only way to ensure styles override each other properly */\n  /* stylelint-disable declaration-block-no-shorthand-property-overrides */ \n  background-color: ${props => legLineBackgroundColor(props)};\n  background: ${props =>\n    coreUtils.itinerary.isFlex(props.leg)\n      ? barberPole(legLineBackgroundColor(props))\n      : undefined};\n  bottom: -11px;\n  position: absolute;\n  top: 11px;\n  z-index: 10;\n`;\n\nconst StackedCircle = styled(Circle)`\n  left: 0;\n  line-height: inherit;\n  position: absolute;\n  text-align: center;\n  width: 100%;\n`;\n\nconst StackedCircleInner = styled(StackedCircle)`\n  top: 3px;\n`;\n\nconst StyledLocationIcon = styled(LocationIcon)`\n  left: 0;\n  position: absolute;\n  text-align: center;\n  width: 100%;\n`;\n\nexport default function LineColumnContent({\n  interline,\n  isDestination,\n  lastLeg,\n  leg,\n  legIndex\n}: LineColumnContentProps): ReactElement {\n  let legBadge;\n  if (interline) {\n    // Interlined. Don't create a leg badge as a stop marker should be inserted\n    // from the place name\n  } else if (isDestination) {\n    // Destination\n    legBadge = (\n      <>\n        <StackedCircleInner size={14} color=\"white\" />\n        <StyledLocationIcon size={20} type=\"to\" />\n      </>\n    );\n  } else if (legIndex === 0) {\n    // Origin\n    legBadge = (\n      <>\n        <StackedCircleInner size={14} color=\"white\" />\n        <StyledLocationIcon size={20} type=\"from\" />\n      </>\n    );\n  } else if (\n    ((leg.from.bikeShareId || leg.from.rentalVehicle) &&\n      leg.mode.startsWith(\"BICYCLE\")) ||\n    (lastLeg.from.bikeShareId && leg.mode === \"WALK\")\n  ) {\n    // start or end of a bike rental leg (not including origin or\n    // destination)\n    legBadge = <StackedCircle size={17} color=\"red\" />;\n  } else if (\n    leg.from.vertexType === \"VEHICLERENTAL\" ||\n    leg.from.vertexType === \"BIKESHARE\" ||\n    (lastLeg.from.vertexType === \"VEHICLERENTAL\" && leg.mode === \"WALK\") ||\n    (lastLeg.from.vertexType === \"BIKESHARE\" && leg.mode === \"WALK\")\n  ) {\n    // start or end of a vehicle rental leg (not including origin or\n    // destination)\n    legBadge = <StackedCircle size={17} color=\"#f5a729\" />;\n  } else if (\n    (leg.mode === \"CAR\" && lastLeg.mode === \"WALK\") ||\n    (lastLeg.mode === \"CAR\" && leg.mode === \"WALK\")\n  ) {\n    // start or end of a car rental/TNC/P&R leg (not including origin or\n    // destination)\n    legBadge = <StackedCircle size={17} color=\"#888\" />;\n  } else {\n    legBadge = (\n      <>\n        <StackedCircle size={20} color=\"black\" />\n        <StackedCircleInner size={14} color=\"white\" />\n      </>\n    );\n  }\n\n  return (\n    <>\n      {!isDestination && <LegLine leg={leg} routeColor={leg.routeColor} />}\n      <IconStacker>{legBadge}</IconStacker>\n    </>\n  );\n}\n"],"file":"line-column-content.js"}