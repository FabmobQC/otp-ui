{"version":3,"sources":["../../../src/apis/otp/index.ts"],"names":["run","query","url","fetch","then","res","text","JSON","parse","autocomplete","search","console","warn","reverse"],"mappings":";;;;;;;;;AACA;AAsBA,SAASA,GAAT,CAAa;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAb,EAAsE;AACpE,SAAOC,KAAK,CAAE,GAAED,GAAI,+BAA8BD,KAAM,EAA5C,CAAL,CACJG,IADI,CACCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADR,EAEJF,IAFI,CAECC,GAAG,IAAIE,IAAI,CAACC,KAAL,CAAY,eAAcH,GAAI,GAA9B,CAFR,CAAP;AAGD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,eAAeI,YAAf,CAA4B;AAC1BP,EAAAA,GAD0B;AAE1BI,EAAAA;AAF0B,CAA5B,EAGoD;AAClD,SAAON,GAAG,CAAC;AACTC,IAAAA,KAAK,EAAEK,IADE;AAETJ,IAAAA;AAFS,GAAD,CAAV;AAID;;AAED,SAASQ,MAAT,GAAoC;AAAEC,EAAAA,OAAO,CAACC,IAAR,CAAa,iBAAb;AAAiC,SAAO,IAAP;AAAa;;AACpF,SAASC,OAAT,GAAqC;AAAEF,EAAAA,OAAO,CAACC,IAAR,CAAa,iBAAb;AAAiC,SAAO,IAAP;AAAa","sourcesContent":["\n// eslint-disable-next-line prettier/prettier\nimport type { AutocompleteQuery } from \"../../geocoders/types\"\n\ntype FetchArgs = {\n  url: string\n  query: string\n}\n\ntype OTPGeocoderResponse = {\n  results: {\n    coordinate: {\n      lat: number,\n      lon: number,\n    },\n    code: string,\n    name: string,\n    id: string,\n    modes: string[]\n  }[]\n} | undefined\n\n\nfunction run({ query, url }: FetchArgs): Promise<OTPGeocoderResponse> {\n  return fetch(`${url}/geocode/stopClusters?query=${query}`)\n    .then(res => res.text())\n    .then(res => JSON.parse(`{\"results\": ${res}}`));\n}\n\n/**\n * Search for an address using\n * OTP Geocoder\n *\n * @param  {Object} $0\n * @param  {string} $0.url  The OTP instance, ending with /default/\n * @param  {string} $0.text query\n * @return {Promise}        A Promise that'll get resolved with the autocomplete result\n */\nasync function autocomplete({\n  url,\n  text\n}: AutocompleteQuery): Promise<OTPGeocoderResponse> {\n  return run({\n    query: text,\n    url\n  })\n}\n\nfunction search(): Promise<unknown> { console.warn(\"Not implemented\"); return null }\nfunction reverse(): Promise<unknown> { console.warn(\"Not implemented\"); return null }\n\n\nexport { autocomplete, reverse, search };\nexport type { OTPGeocoderResponse }\n"],"file":"index.js"}